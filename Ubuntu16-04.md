---
title: Ubuntu16.04双系统的安装
name: Ubuntu16-04
date: 2019-04-19
id: 0
tags: [暂时没有标签]
categories: []
abstract: ""
---


# 注意：仅适合UEFI引导的系统

网络上很多的安装教程都有许多误导，直接在互联网上搜索得到的答案大致分为如下几类：

- 利用vmware或者box虚拟机，进入试用ubuntu界面后，连接外部usb安装

- 利用u盘启动盘
<!--more-->


# 注意：仅适合UEFI引导的系统

网络上很多的安装教程都有许多误导，直接在互联网上搜索得到的答案大致分为如下几类：

- 利用vmware或者box虚拟机，进入试用ubuntu界面后，连接外部usb安装

- 利用u盘启动盘<!--more-->

    

一开始我是想要安装在u盘里面，做成口袋系统，但是u盘没有缓存，一直读写容易坏，而且系统引导是由grub引导的一旦u盘拔出就会出现找不到引导系统的问题

最后我决定在机械硬盘上安装ubuntu，最后实现ssd上跑win10，硬盘上跑ubuntu的双系统

## 开始

因为安装的过程没有截图，所以描述全部由纯文字表述，但是你一定能看懂

**误区1**

什么是uefi和bios的区别：
	uefi作为新的启动方式，由efi进行系统引导，新的笔记本操作系统几乎都采用uefi引导，所以我们安装ubuntu的时候也采用uefi引导，网络教程大部分u盘安装要求进入系统bios关闭secure boot，开启兼容启动（lagency或者launch in csm启动。好像是这两个叫法）。

​	网络解释是：只有这样系统才能识别u盘，才能使用u盘启动盘安装，然而这是错误的。开启兼容模式启动后安装的ubuntu系统就是传统bios引导，无法和uefi引导的windows共存，所以每次启动系统必须进入bios开启和关闭兼容模式启动，来更换系统

**误区2**

分区：

​	有几篇文章给的分区很详细，把swap，home，boot，usr都分配了空间，但是其实只需要分配下swap和/home分区，其他的由系统自动分配。

分区的区域设置：分为主分区和逻辑分区，在uefi模式下不分这个，不需要管

**误区3**

系统引导：

​	一般系统引导分区为/boot，网上的教程建议/boot分配500m以上，格式选择为bios预留，然后在下方的选择启动引导器的设备里选择/boot所在的分区。

​	这个做法是用于bios系统，而且选择/boot所在的分区后，引导安装的位置与win10不一样，在uefi模式下不会找到ubuntu的引导开机选项

## 正确做法

- 找到自己电脑的进入bios的快捷按钮，华硕是F2，在开机界面一直按F2进入bios
- 进入bios，自行百度关闭windows的安全启动，即secure boot设置为disable
- 不要按照网上的说法打开兼容模式启动，直接开机，进入windows准备

### 给机械硬盘分区

​	使用搜索或者小娜搜索`分区`，打开windows自带的分区工具，会看见自己的硬盘，不看固态硬盘，根据容量找到机械硬盘，右键`压缩卷`，会弹出压缩空间窗口，根据自己情况填写，100GB就很好，然后确定开始压缩，一般等待30分钟到两个小时不等。

​	压缩完成后，会弹出窗口，要求分配卷标或者格式化，注意现在新的分区应该是未分配状态，不需要分配空间，直接关掉。

### 制作启动u盘

​	不要使用软碟通也就是Ultraliso，选择ubuntu官方推荐的工具rufus，[地址](http://rufus.ie/)，不想安装就选择便携版本下载。

​	下载好ubuntu的镜像iso文件，进入rufus，选择自己的u盘（最好是fat32格式，不支持exfat），选择镜像文件，分区类型选择GPT（因为机械硬盘的分区表结构是这个），目标格式选择UEFI，其他默认然后点击开始制作

​	注意会格式化u盘，注意备份

### 安装系统

#### 重启

进入bios界面（华硕按F2），在boot 项下的boot option里把名称为你u盘名称（也可能为general usb设备）的选项上移到第一位，然后F10保存确定重启

#### 开始安装

正常情况下进入ubuntu系统界面，选择语言中文或者不选，点击install ubuntu

可以参考网络教程的图解，到达安装分区的那一步，第一个选项是安装ubuntu到整个磁盘，选这个就完了。选择最后一项`其他`，进入自定义分区的界面。

参考网络的分区建议或者按照我的步骤，找到自己刚才压缩的100GB分区，应该是显示空闲，然后左下角的`加号+`。

先分配引导系统文件格式选择`efi系统`，位置选择`/boot`。

分配系统部分，文件格式选择`ext4`，位置`/`，建议60GB，系统程序都在这里。

分配用户文件夹，格式`ext4`，位置`/home`，自己的文件放在这里，建议25GB以上

分配swap，格式选择`交换空间`，位置为空，不分配时后面系统可能不能正常待机

其他的交给系统分配

最后，在最下面的安装系统引导设备选择`windows bootmanager`，如果没有那么就不是以uefi模式安装的系统，退回去重新做。

等待安装完成

#### 使用

安装完成后，提示重启系统，就会进入grub界面，引导第一项应该是ubuntu，第二项是ubuntu高级选项，第三个是windows。

**记得先拔掉u盘**



## 后记

如果分区错误，导致系统安装失败，可以进入bios选择第一项启动为windows，进入windows使用diskgenius删除分区，删掉之后就是空闲空间了

ubuntu出现问题想要重装一次：由于efi是写在windows的隐藏分区里，要删掉efi分区里的ubuntu项，才能完全卸载ubuntu，方法参考文章：[简书](https://www.jianshu.com/p/893c31c4fb19)

