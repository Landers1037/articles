---
title: lvs的10种算法
name: lvs10
date: 2020-03-14
id: 0
tags: [linux]
categories: []
abstract: ""
---


LVS负载均衡的10种算法

<!--more-->

## 静态调度算法

### 轮询(RR)

多个后端服务，按照顺序轮流地把负载分配到服务器上

### 加权轮询(WRR)

给每个服务器设置加权，性能更好，处理能力强的服务器加权更大，于是轮询分配的负载更多

### 目标地址哈希(DH)

根据访问的目标地址，将其作为散列表的键，从散列表中找到对应的后端服务器，如果此服务器可用负载正常，就将请求发送至该服务器

### 源地址哈希(SH)

根据客户端的IP地址作为已经分配的散列表的键，从中找到对应的服务器，如果服务器可用未超载，就把请求发送至该服务器

## 动态调度算法

### 最小连接(LC)

基于最小连接的算法，动态地将请求发送到当前连接数最少的服务器

### 加权最小连接(WLC)

在最小连接的基础上为服务器添加权值，性能更好的服务器拥有更大的加权。适用于集群服务器性能相差大的情况。计算方式`(active*256+inactive)/weight`

### 基于局部的最小连接(LBLC)

主要用于cache服务器，可以找到距离请求IP地址最近的服务器，如果此服务器可用并且负载正常就会将请求转发到该服务器。若不存在该服务器则使用LC找到一台可以使用的服务器

### 基于复制的局部最小连接(LBLCR)

和LBLC不同的是它要维护一个从目标IP到一组服务器的映射，在这群组中按照LC找到一台可用的服务器

### 最短期望延迟(SED)

基于WLC算法，但是计算方式是`（active+1)*256/weight`

### 最少队列(NQ)

即无需等待队列，如果有一台连接数为0的服务器就直接将请求发送至该服务器。如果该服务器有连接则使用SED







