---
title: mgek图床项目第一期
name: mgek-prj-imgbed-1
date: 2020-06-15
id: 0
tags: [python]
categories: []
abstract: ""
---


**Mgek项目**-ImgBed第一期

整体架构设计


<!--more-->


**Mgek项目**-ImgBed第一期

整体架构设计

<!--more-->

# 功能需求

1. 图片的批量上传
2. 用户的登录认证（token令牌方式）
3. 图片操作的权限
4. 用户token的找回和用户账户注销
5. 多数据库支持`sqlite/mongoDB`

## 模块分类

- **路由蓝图**
    - 登录token生成模块
    - 图片上传模块
    - 图片删除模块
    - 图片信息修改模块
    - 图片列表模块
    - 图片直链生成模块
- **路由中间件**
    - 全局token鉴权模块
    - IP频率记录模块
- **多数据库模块**
    - sqlite操作模块
    - mongo操作模块
    - 数据库模型映射
- **配置模块**
    - 默认配置初始化
    - 配置文件持久化
    - 配置文件读取
- **功能函数模块**

## 路由设计

整个项目的路由主要分为三个部分，图片相关，登录认证相关， 系统配置

### 图片相关(img)

包括图片上传，图片信息获取，图片列表获取，图片删除，图片格式化输出

### 登录认证相关(auth)

包括数据库初始化，新用户注册获取token，用户邮件找回，用户注销

### 系统配置相关(sys)

包括系统配置读取

## 设计方式

使用蓝图构建方式设计不同模块的路由

在中间件中针对不同的路由设计对应的中间件

普通请求路由使用`GET`方式

提交类路由使用`POST`方式

删除类路由使用`DELETE`方式 